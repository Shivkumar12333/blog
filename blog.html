<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog Details</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 50%, #0f0f0f 100%);
    }
    
    .blog-hero {
      background: linear-gradient(135deg, rgba(67, 56, 202, 0.1) 0%, rgba(139, 92, 246, 0.1) 100%);
      border: 1px solid rgba(139, 92, 246, 0.2);
    }
    
    .content-wrapper {
      backdrop-filter: blur(10px);
      background: rgba(17, 24, 39, 0.8);
      border: 1px solid rgba(75, 85, 99, 0.3);
    }
    
    .floating-action {
      position: fixed;
      right: 2rem;
      bottom: 2rem;
      z-index: 50;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    .action-btn {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.25rem;
      transition: all 0.3s ease;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .action-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }
    
    .reading-progress {
      position: fixed;
      top: 0;
      left: 0;
      width: 0%;
      height: 3px;
      background: linear-gradient(90deg, #3b82f6, #8b5cf6);
      z-index: 100;
      transition: width 0.1s ease;
    }
    
    .comment-card {
      background: rgba(31, 41, 55, 0.6);
      border: 1px solid rgba(75, 85, 99, 0.3);
      backdrop-filter: blur(5px);
    }
    
    .prose-enhanced {
      line-height: 1.8;
      font-size: 1.1rem;
    }
    
    .prose-enhanced h1, .prose-enhanced h2, .prose-enhanced h3 {
      background: linear-gradient(135deg, #3b82f6, #8b5cf6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-top: 2rem;
      margin-bottom: 1rem;
    }
    
    .prose-enhanced p {
      margin-bottom: 1.5rem;
      color: #d1d5db;
    }
    
    .prose-enhanced blockquote {
      border-left: 4px solid #8b5cf6;
      padding-left: 1.5rem;
      margin: 2rem 0;
      font-style: italic;
      color: #9ca3af;
    }
    
    .author-info {
      background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
      border: 1px solid rgba(139, 92, 246, 0.2);
    }
    
    .tag-cloud {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    
    .tag {
      background: linear-gradient(135deg, #374151, #4b5563);
      color: #e5e7eb;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.875rem;
      border: 1px solid rgba(107, 114, 128, 0.3);
    }
    
    .interaction-stats {
      display: flex;
      align-items: center;
      gap: 2rem;
      margin-top: 1rem;
      padding: 1rem;
      background: rgba(31, 41, 55, 0.5);
      border-radius: 0.75rem;
      border: 1px solid rgba(75, 85, 99, 0.3);
    }
    
    .stat-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: #9ca3af;
    }
    
    .animate-fade-in {
      animation: fadeIn 0.8s ease-in-out;
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .animate-slide-up {
      animation: slideUp 0.6s ease-out;
    }
    
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-B6S56230L1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-B6S56230L1');
  </script>
  
  <!-- Enhanced Features -->
    <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="enhanced-features.css">
  <link rel="stylesheet" href="mobile-responsive.css">
  
  <!-- Enhanced Features Scripts -->
  <script src="theme-toggle.js"></script>
  <script src="reading-progress.js"></script>
  <script src="bookmark-system.js"></script>
  <script src="print-export.js"></script>
  <script src="related-posts.js"></script>
  <script src="random-chat.js"></script>
  <script src="mobile-navigation.js"></script>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore-compat.js"></script>
</head>
<body class="min-h-screen text-gray-100">
  <!-- Reading Progress Bar -->
  <div class="reading-progress" id="readingProgress"></div>

  <!-- Header -->
  <header class="sticky top-0 z-40 backdrop-blur-md bg-gray-900/80 border-b border-gray-800">
    <div class="header-content max-w-7xl mx-auto px-6 py-4">
      <div class="flex justify-between items-center">
        <div class="flex items-center space-x-4">
          <a href="index.html" class="text-2xl font-bold">
            <span class="text-white">DEEP</span><span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-400">sink</span>
          </a>
          <div class="hidden md:flex items-center space-x-1 text-sm text-gray-400">
            <a href="index.html" class="hover:text-white transition-colors">Home</a>
            <i class="fas fa-chevron-right text-xs"></i>
            <span>Article</span>
          </div>
        </div>
        <nav class="flex items-center space-x-6">
          <a href="index.html" class="text-gray-300 hover:text-white transition-colors">Home</a>
          <a href="create.html" class="text-gray-300 hover:text-white transition-colors">Write</a>
          <a href="about.html" class="text-gray-300 hover:text-white transition-colors">About</a>
          <a href="contact.html" class="text-gray-300 hover:text-white transition-colors">Contact</a>
          <button id="loginBtn" class="px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300">
            <i class="fas fa-sign-in-alt mr-2"></i>Login
          </button>
        </nav>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-4xl mx-auto px-6 py-8">
    <div id="blog" class="animate-fade-in"></div>
  </main>

  <!-- Floating Action Buttons -->
  <div class="floating-action">
    <button id="backToTop" class="action-btn bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:from-blue-700 hover:to-purple-700" title="Back to Top">
      <i class="fas fa-arrow-up"></i>
    </button>
    <button id="shareBtn" class="action-btn bg-gradient-to-r from-green-600 to-blue-600 text-white hover:from-green-700 hover:to-blue-700" title="Share Article">
      <i class="fas fa-share-alt"></i>
    </button>
    <button id="printBtn" class="action-btn bg-gradient-to-r from-purple-600 to-pink-600 text-white hover:from-purple-700 hover:to-pink-700" title="Print Article">
      <i class="fas fa-print"></i>
    </button>
  </div>

  <!-- Firebase Blog Logic -->
  <script defer>
    document.addEventListener("DOMContentLoaded", async () => {
      const firebaseConfig = {
        apiKey: "AIzaSyAFJcSrPvrEq5lJVBtl2mhsQb84msmUb9s",
        authDomain: "bolg3-8e3a0.firebaseapp.com",
        projectId: "bolg3-8e3a0",
        storageBucket: "bolg3-8e3a0.firebasestorage.app",
        messagingSenderId: "1049434507094",
        appId: "1:1049434507094:web:e9fdb60cc3b6bd483278f7",
        measurementId: "G-81G7QJFT9R"
      };

      if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
      }
      firebase.auth();

      const db = firebase.firestore();
      const blogContainer = document.getElementById("blog");
      const params = new URLSearchParams(window.location.search);
      const blogId = params.get("id");

      // Reading progress functionality
      const readingProgress = document.getElementById("readingProgress");
      const updateReadingProgress = () => {
        const article = document.querySelector('.prose-enhanced');
        if (article) {
          const totalHeight = article.scrollHeight;
          const windowHeight = window.innerHeight;
          const scrollTop = window.scrollY;
          const progress = (scrollTop / (totalHeight - windowHeight)) * 100;
          readingProgress.style.width = Math.min(progress, 100) + '%';
        }
      };
      window.addEventListener('scroll', updateReadingProgress);

      // Floating action buttons
      document.getElementById('backToTop').addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      document.getElementById('printBtn').addEventListener('click', () => {
        window.print();
      });

      const loginBtn = document.getElementById("loginBtn");
      loginBtn.addEventListener("click", async () => {
        const provider = new firebase.auth.GoogleAuthProvider();
        try {
          await firebase.auth().signInWithPopup(provider);
          alert("Logged in successfully.");
          location.reload();
        } catch (error) {
          alert("Login failed.");
          console.error(error);
        }
      });

      if (!blogId) {
        blogContainer.innerHTML = `
          <div class="content-wrapper rounded-2xl p-8 text-center">
            <div class="text-6xl mb-4">📝</div>
            <h2 class="text-2xl font-bold text-red-400 mb-4">Invalid Blog ID</h2>
            <p class="text-gray-400">The blog you're looking for doesn't exist.</p>
            <a href="index.html" class="inline-block mt-4 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300">
              <i class="fas fa-arrow-left mr-2"></i>Back to Home
            </a>
          </div>
        `;
        return;
      }

      try {
        const docRef = db.collection("blogs").doc(blogId);
        const doc = await docRef.get();

        if (!doc.exists) {
          blogContainer.innerHTML = `
            <div class="content-wrapper rounded-2xl p-8 text-center">
              <div class="text-6xl mb-4">🔍</div>
              <h2 class="text-2xl font-bold text-gray-400 mb-4">Blog Not Found</h2>
              <p class="text-gray-500">The blog post you're looking for doesn't exist.</p>
              <a href="index.html" class="inline-block mt-4 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300">
                <i class="fas fa-arrow-left mr-2"></i>Back to Home
              </a>
            </div>
          `;
          return;
        }

        const blog = doc.data();
        const createdAt = blog.createdAt?.toDate() || new Date();
        const formattedDate = createdAt.toLocaleDateString('en-US', {
          year: 'numeric',
          month: 'long',
          day: 'numeric'
        });
        const readingTime = Math.ceil((blog.content?.length || 0) / 1000) + ' min read';

        // Create hero section
        const heroSection = document.createElement("div");
        heroSection.className = "blog-hero rounded-2xl p-8 mb-8 animate-fade-in";
        heroSection.innerHTML = `
          <div class="flex items-center justify-between mb-6">
            <div class="flex items-center space-x-4">
              <span class="px-3 py-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full text-sm font-medium">
                ${blog.category || 'Article'}
              </span>
              <span class="text-gray-400 text-sm">
                <i class="fas fa-calendar mr-1"></i>${formattedDate}
              </span>
              <span class="text-gray-400 text-sm">
                <i class="fas fa-clock mr-1"></i>${readingTime}
              </span>
            </div>
            <button id="bookmarkBtn" class="text-2xl text-gray-400 hover:text-yellow-400 transition-colors" title="Bookmark this article">
              <i class="far fa-bookmark"></i>
            </button>
          </div>
          <h1 class="text-4xl md:text-5xl font-bold mb-4 leading-tight">
            <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400">
              ${blog.title}
            </span>
          </h1>
          <p class="text-xl text-gray-300 leading-relaxed">
            ${blog.description || 'Dive into this fascinating article and discover new insights.'}
          </p>
          <div class="interaction-stats mt-6">
            <div class="stat-item">
              <i class="fas fa-heart text-red-400"></i>
              <span id="likeCount">${blog.likes || 0}</span>
              <span>Likes</span>
            </div>
            <div class="stat-item">
              <i class="fas fa-comments text-blue-400"></i>
              <span>${(blog.comments || []).length}</span>
              <span>Comments</span>
            </div>
            <div class="stat-item">
              <i class="fas fa-eye text-green-400"></i>
              <span>${blog.views || 0}</span>
              <span>Views</span>
            </div>
          </div>
        `;

        // Create main content wrapper
        const contentWrapper = document.createElement("div");
        contentWrapper.className = "content-wrapper rounded-2xl p-8 mb-8 animate-slide-up";

        // Add featured image if exists
        if (blog.imageUrl) {
          const imageContainer = document.createElement("div");
          imageContainer.className = "mb-8";
          imageContainer.innerHTML = `
            <img src="${blog.imageUrl}" alt="${blog.title}" class="w-full rounded-xl shadow-2xl" loading="lazy">
          `;
          contentWrapper.appendChild(imageContainer);
        }

        // Add content
        const contentDiv = document.createElement("div");
        contentDiv.className = "prose-enhanced max-w-none";
        contentDiv.innerHTML = blog.content || '<p class="text-gray-400">No content available.</p>';
        contentWrapper.appendChild(contentDiv);

        // Add tags if available
        if (blog.tags && blog.tags.length > 0) {
          const tagsDiv = document.createElement("div");
          tagsDiv.className = "tag-cloud mt-8 pt-6 border-t border-gray-700";
          tagsDiv.innerHTML = `
            <h4 class="text-lg font-semibold mb-3">
              <i class="fas fa-tags mr-2"></i>Tags
            </h4>
            ${blog.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
          `;
          contentWrapper.appendChild(tagsDiv);
        }

        // Create action buttons
        const actionsDiv = document.createElement("div");
        actionsDiv.className = "flex flex-wrap gap-4 mt-8 pt-6 border-t border-gray-700";
        actionsDiv.innerHTML = `
          <button id="likeBtn" class="flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-pink-600 to-red-600 text-white rounded-lg hover:from-pink-700 hover:to-red-700 transition-all duration-300">
            <i class="fas fa-heart"></i>
            <span>Like</span>
            <span class="bg-white bg-opacity-20 px-2 py-1 rounded-full text-sm" id="likeCountBtn">${blog.likes || 0}</span>
          </button>
          <button id="shareMainBtn" class="flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300">
            <i class="fas fa-share-alt"></i>
            <span>Share</span>
          </button>
          <button id="downloadBtn" class="flex items-center space-x-2 px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-lg hover:from-gray-700 hover:to-gray-800 transition-all duration-300">
            <i class="fas fa-download"></i>
            <span>Save</span>
          </button>
        `;
        contentWrapper.appendChild(actionsDiv);

        // Create author info section
        const authorSection = document.createElement("div");
        authorSection.className = "author-info rounded-2xl p-6 mb-8 animate-slide-up";
        authorSection.innerHTML = `
          <div class="flex items-center space-x-4">
            <div class="w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-2xl font-bold text-white">
              ${blog.author ? blog.author.charAt(0).toUpperCase() : 'A'}
            </div>
            <div>
              <h3 class="text-xl font-bold text-white">${blog.author || 'Anonymous Author'}</h3>
              <p class="text-gray-400">Content Creator & Writer</p>
              <p class="text-sm text-gray-500 mt-1">Published on ${formattedDate}</p>
            </div>
          </div>
        `;

        // Create comments section
        const commentSection = document.createElement("div");
        commentSection.className = "content-wrapper rounded-2xl p-8 animate-slide-up";
        
        const commentsHTML = (blog.comments || []).map((comment, index) => {
          const [email, ...textParts] = comment.split(': ');
          const text = textParts.join(': ');
          return `
            <div class="comment-card rounded-xl p-4 mb-4 animate-fade-in" style="animation-delay: ${index * 0.1}s">
              <div class="flex items-start space-x-3">
                <div class="w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-sm font-bold text-white">
                  ${email ? email.charAt(0).toUpperCase() : '?'}
                </div>
                <div class="flex-1">
                  <div class="flex items-center space-x-2 mb-1">
                    <h4 class="font-semibold text-gray-200">${email || 'Anonymous'}</h4>
                    <span class="text-xs text-gray-500">just now</span>
                  </div>
                  <p class="text-gray-300">${text}</p>
                </div>
              </div>
            </div>
          `;
        }).join("");

        commentSection.innerHTML = `
          <div class="flex items-center space-x-3 mb-6">
            <i class="fas fa-comments text-2xl text-blue-400"></i>
            <h3 class="text-2xl font-bold text-white">Comments</h3>
            <span class="px-3 py-1 bg-gray-700 text-gray-300 rounded-full text-sm">${(blog.comments || []).length}</span>
          </div>
          <div id="commentList" class="mb-6">
            ${commentsHTML || '<p class="text-gray-400 text-center py-8">No comments yet. Be the first to share your thoughts!</p>'}
          </div>
          <div class="bg-gray-800 rounded-xl p-6 border border-gray-700">
            <h4 class="text-lg font-semibold mb-4 text-white">Leave a Comment</h4>
            <textarea id="commentInput" rows="3" class="w-full bg-gray-900 border border-gray-600 rounded-lg p-4 text-white placeholder-gray-400 focus:border-blue-500 focus:outline-none resize-none" placeholder="Share your thoughts..."></textarea>
            <div class="flex justify-between items-center mt-4">
              <p class="text-sm text-gray-500">
                <i class="fas fa-info-circle mr-1"></i>
                You must be logged in to post a comment
              </p>
              <button id="commentBtn" class="px-6 py-3 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-lg hover:from-green-700 hover:to-blue-700 transition-all duration-300 flex items-center space-x-2">
                <i class="fas fa-paper-plane"></i>
                <span>Post Comment</span>
              </button>
            </div>
          </div>
        `;

        // Append all sections
        blogContainer.appendChild(heroSection);
        blogContainer.appendChild(contentWrapper);
        blogContainer.appendChild(authorSection);
        blogContainer.appendChild(commentSection);

        // Event listeners
        document.getElementById("likeBtn").addEventListener("click", async () => {
          const countSpan = document.getElementById("likeCount");
          const countBtn = document.getElementById("likeCountBtn");
          const newCount = parseInt(countSpan.textContent) + 1;
          countSpan.textContent = newCount;
          countBtn.textContent = newCount;
          
          // Add visual feedback
          const likeBtn = document.getElementById("likeBtn");
          likeBtn.classList.add("animate-bounce");
          setTimeout(() => likeBtn.classList.remove("animate-bounce"), 1000);
          
          await docRef.update({
            likes: firebase.firestore.FieldValue.increment(1)
          });
        });

        const shareHandler = () => {
          if (navigator.share) {
            navigator.share({
              title: blog.title,
              text: blog.description || 'Check out this amazing article!',
              url: window.location.href
            });
          } else {
            navigator.clipboard.writeText(window.location.href)
              .then(() => {
                // Show toast notification
                const toast = document.createElement('div');
                toast.className = 'fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-fade-in';
                toast.innerHTML = '<i class="fas fa-check mr-2"></i>Link copied to clipboard!';
                document.body.appendChild(toast);
                setTimeout(() => toast.remove(), 3000);
              })
              .catch(() => alert("Failed to copy link."));
          }
        };

        document.getElementById("shareBtn").addEventListener("click", shareHandler);
        document.getElementById("shareMainBtn").addEventListener("click", shareHandler);

        document.getElementById("bookmarkBtn").addEventListener("click", () => {
          const bookmarkBtn = document.getElementById("bookmarkBtn");
          const icon = bookmarkBtn.querySelector("i");
          
          if (icon.classList.contains("far")) {
            icon.classList.remove("far");
            icon.classList.add("fas");
            bookmarkBtn.classList.add("text-yellow-400");
            localStorage.setItem(`bookmark_${blogId}`, 'true');
          } else {
            icon.classList.remove("fas");
            icon.classList.add("far");
            bookmarkBtn.classList.remove("text-yellow-400");
            localStorage.removeItem(`bookmark_${blogId}`);
          }
        });

        // Check if already bookmarked
        if (localStorage.getItem(`bookmark_${blogId}`)) {
          const bookmarkBtn = document.getElementById("bookmarkBtn");
          const icon = bookmarkBtn.querySelector("i");
          icon.classList.remove("far");
          icon.classList.add("fas");
          bookmarkBtn.classList.add("text-yellow-400");
        }

        document.getElementById("commentBtn").addEventListener("click", async () => {
          const commentInput = document.getElementById("commentInput");
          const newComment = commentInput.value.trim();

          const user = firebase.auth().currentUser;
          if (!user) {
            alert("You must be logged in to post a comment.");
            return;
          }

          if (!newComment) {
            alert("Please enter a comment.");
            return;
          }

          try {
            await docRef.update({
              comments: firebase.firestore.FieldValue.arrayUnion(`${user.email}: ${newComment}`)
            });

            const commentList = document.getElementById("commentList");
            const newCommentEl = document.createElement("div");
            newCommentEl.className = "comment-card rounded-xl p-4 mb-4 animate-fade-in";
            newCommentEl.innerHTML = `
              <div class="flex items-start space-x-3">
                <div class="w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-sm font-bold text-white">
                  ${user.email.charAt(0).toUpperCase()}
                </div>
                <div class="flex-1">
                  <div class="flex items-center space-x-2 mb-1">
                    <h4 class="font-semibold text-gray-200">${user.email}</h4>
                    <span class="text-xs text-gray-500">just now</span>
                  </div>
                  <p class="text-gray-300">${newComment}</p>
                </div>
              </div>
            `;
            
            if (commentList.querySelector('.text-center')) {
              commentList.innerHTML = '';
            }
            commentList.appendChild(newCommentEl);
            commentInput.value = "";
            
            // Show success message
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg z-50 animate-fade-in';
            toast.innerHTML = '<i class="fas fa-check mr-2"></i>Comment posted successfully!';
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
            
          } catch (error) {
            console.error("Failed to post comment:", error);
            alert("Failed to post comment. Please try again.");
          }
        });

        // Update view count
        await docRef.update({
          views: firebase.firestore.FieldValue.increment(1)
        });

      } catch (error) {
        console.error("Error loading blog:", error);
        blogContainer.innerHTML = `
          <div class="content-wrapper rounded-2xl p-8 text-center">
            <div class="text-6xl mb-4">⚠️</div>
            <h2 class="text-2xl font-bold text-red-400 mb-4">Error Loading Blog</h2>
            <p class="text-gray-400">There was an error loading this blog post. Please try again later.</p>
            <button onclick="location.reload()" class="inline-block mt-4 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300">
              <i class="fas fa-refresh mr-2"></i>Retry
            </button>
          </div>
        `;
      }
    });
  </script>
</body>
</html>
